"use strict";(self.webpackChunkwasmx_docs=self.webpackChunkwasmx_docs||[]).push([[4875],{1970:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>r,contentTitle:()=>c,default:()=>d,frontMatter:()=>o,metadata:()=>s,toc:()=>h});var s=n(4997),a=n(4848),i=n(8453);const o={slug:"multichain-cross-chain-tx",title:"MythosX - Trees of blockchains - a scaling solution [multichain elective state syncing]",authors:"loredana",tags:["wasmx","treechains","mythos","networkstate"]},c="Trees of blockchains: a scaling solution [atomic, cross-chain transactions]",r={authorsImageUrls:[void 0]},h=[];function l(e){const t={code:"code",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.p,{children:"We are building a trust scalable system powered by a networked set of homogeneous blockchains based on our WasmX engine."}),"\n",(0,a.jsx)(t.p,{children:"Our wasmX engine is a WebAssembly-based, upgradable & customizable blockchain core that can be extended through WASM modules. It is compatible with both Cosmos and Ethereum blockchains. In fact, WasmX uses the Cosmos Baseapp, while reimplementing all additional modules as WASM contracts."}),"\n",(0,a.jsx)(t.p,{children:"Now imagine a hierarchy of blockchain levels, without going into too much detail, the higher the level, the sparser the information on that chain. The highest level contains mostly proofs of the activity on the lower chains and aggregate data from the lower chains. The higher levels are also a trust provider for the lower level chains.\nThe lower level chains hold the actual data and they can be scaled independently.\nLower levels can have more independence as to their rules of use and they can eventually choose wether or not to be part of this hierarchy."}),"\n",(0,a.jsx)(t.p,{children:"This type of system can reach instant national-scale voting for the country of France with 2200 validators - this is just 0.4% of the number of validators that Ethereum has."}),"\n",(0,a.jsx)(t.p,{children:"Also, these levels can communicate through cross-chain transactions. And this is what I will demo today."}),"\n",(0,a.jsx)(t.p,{children:"Let's create the simplest local setup: we have 3 validators on a Mythos testnet, with a minimum of 1 validator for each subchain that is created."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:'mythosd testnet init-files --chain-id=mythos_7000-14 --output-dir=$(pwd)/testnet --v=3 --keyring-backend=test --minimum-gas-prices="1000amyt" --same-machine=true --nocors --libp2p --min-level-validators=1 --enable-eid=false\n'})}),"\n",(0,a.jsx)(t.p,{children:"we start the nodes and then run the setup for creating 2 levels, each with 1 validator. we execute this on the mythos local chain, because this is where the multichain registry is."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:'mythosd testnet create-levels 2 1 --chain-id="mythos_7000-14" --keyring-backend test --home ./testnet\n'})}),"\n",(0,a.jsx)(t.p,{children:"when we register new chains, the multichain registry generates a default genesis setup for the chain and registers the node sending the request as a validator."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:'"start registering new default subchain"\n"start registering new subchain validator"\n'})}),"\n",(0,a.jsx)(t.p,{children:"in this version of the multichain registry, only Mythos validators can create subchains. And in the production version, only accounts with valid electronic IDs will be able to validate."}),"\n",(0,a.jsx)(t.p,{children:"When the chain has enough validators, it can be initialized. And this simply triggers an event on Mythos. That is caught by each node and each node can decide to initialize this subchain or not."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:'"node is validating the new subchain"\n'})}),"\n",(0,a.jsx)(t.p,{children:"generally, only the nodes who are validators are by default the ones that will initialize the subchain."}),"\n",(0,a.jsx)(t.p,{children:"So, with the same software, we are running multiple chains here. mythos, this chain0_1_1001-1 chain, this level0 chain is a private blockchain, private to the device."}),"\n",(0,a.jsx)(t.p,{children:"On top of this level1 chain0_1_1001-1 that we have created, another one is also created automatically - a level2 chain."}),"\n",(0,a.jsx)(t.p,{children:"So, I can demonstrate communication between the level1 & level 2 chains."}),"\n",(0,a.jsx)(t.p,{children:"So, lets deploy some contracts on these two chains. And we can interact with any of these chains."}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"we will deploy a simple storage contract on level 1"}),"\n",(0,a.jsx)(t.li,{children:"this is the simple storage contract - with set & get methods."}),"\n"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:"mythosd tx wasmx store ./x/network/keeper/testdata/wasmx/simple_storage.wasm --chain-id=chain0_1_1001-1 --registry-chain-id=mythos_7000-14 --from=node0 --keyring-backend=test --home=./testnet/node0/mythosd --fees=90000000000alvl0 --gas=9000000 --yes\n"})}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:"chain id is chain0 .. and the multichain registry is on the mythos chain - the multichain registry is a contract under consensus rules and holds the chain configurations - like address prefixes & denominations."}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:"we can look after the store_code event and we see it here, the code id is 50, for the wasm contract. so we can instante it."}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:'mythosd tx wasmx instantiate 50 \'{"data":"{}"}\' --label "simple_storage" --chain-id=chain0_1_1001-1 --registry-chain-id=mythos_7000-14 --from=node0 --keyring-backend=test --home=./testnet/node0/mythosd --fees=90000000000alvl0 --gas=9000000 --yes\n'})}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:'search "instantiate" and we get the address of the new contract.'}),"\n"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:"chain016tsljek8g3av2rp8wnztga65xkn2dns8vdh4rl\n"})}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"now lets deploy on the level 2 chain a contract that knows how to make a cross-chain transaction."}),"\n",(0,a.jsx)(t.li,{children:"this is the crosschain test contract, it just forwards the request to the system. and we will use this contract to send a transaction to the level1 simple storage contract and change a value there. We deploy it."}),"\n"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:"mythosd tx wasmx store ./x/network/keeper/testdata/wasmx/crosschain.wasm --chain-id=leveln_2_1002-1 --registry-chain-id=mythos_7000-14 --from=node0 --keyring-backend=test --home=./testnet/node0/mythosd --fees=90000000000alvl2 --gas=9000000 --yes\n"})}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"It also has a code id of 50. We instantiate it."}),"\n"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:'mythosd tx wasmx instantiate 50 \'{"data":"{}"}\' --label "crosschain" --chain-id=leveln_2_1002-1 --registry-chain-id=mythos_7000-14 --from=node0 --keyring-backend=test --home=./testnet/node0/mythosd --fees=90000000000alvl2 --gas=9000000 --yes\n'})}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:['Search "instantiate". And we get the address ',(0,a.jsx)(t.code,{children:"leveln1dpfdf0r42qttzgg6qnkkc7tyscx4t6r44fdmxf"})]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:'Now, let\'s set a variable on the simple storage contract at key "hello", we store the string "brian"'}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:'mythosd tx wasmx execute chain016tsljek8g3av2rp8wnztga65xkn2dns8vdh4rl \'{"set":{"key":"hello","value":"brian"}}\' --chain-id=chain0_1_1001-1 --registry-chain-id=mythos_7000-14 --from=node0 --keyring-backend=test --home=./testnet/node0/mythosd --fees=90000000000alvl0 --gas=9000000 --yes\n'})}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"and now we can query it."}),"\n"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:'mythosd query multichain call chain016tsljek8g3av2rp8wnztga65xkn2dns8vdh4rl \'{"get":{"key":"hello"}}\' --from node0 --keyring-backend test --chain-id=chain0_1_1001-1 --registry-chain-id=mythos_7000-14 --home=./testnet/node0/mythosd\n'})}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["and we get ",(0,a.jsx)(t.code,{children:"brian"})]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:"cross-chain transactions are part of what we call atomic transactions. and I have a cli command that makes it easy to create these atomic transactions from a json file."}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:'essentially, we call the CrossChain method of the crosschain test contract. with this request to the simple storage contract on level 1 chain. the message is base64 encoded and it is setting the value "sammy" for the "hello" key'}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:"now we execute this atomic transaction, we need to say what chains are affected by it. Also, an atomic transaction can contain many internal transactions to several chains. in this case, we only have one cross-chain transaction."}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:'mythosd tx multichain atomic "/Users/user/dev/blockchain/wasmx-tests/atomictx.json" leveln_2_1002-1,chain0_1_1001-1 --chain-id=leveln_2_1002-1 --registry-chain-id=mythos_7000-14 --from=node0 --keyring-backend=test --home=./testnet/node0/mythosd --fees=90000000000alvl2 --gas=9000000 --yes\n'})}),"\n",(0,a.jsx)(t.p,{children:'We execute it and we will look at the logs containing the word "atomic"'}),"\n",(0,a.jsx)(t.p,{children:'But lets see if the value has changed in our storage contract. and it is now "sammy".'}),"\n",(0,a.jsx)(t.p,{children:"we see the atomic transaction was added to the level 2 chain mempool. and the level 2 chain is the leader for the atomic tx, so only this chain can begin execution."}),"\n",(0,a.jsx)(t.p,{children:"now we see the atomic transaction being added to the level1 chain mempool. this chain will wait to execute this transaction until after the leader starts execution."}),"\n",(0,a.jsx)(t.p,{children:"and this is what happens next - the leader starts execution by adding it to the block proposal."}),"\n",(0,a.jsx)(t.p,{children:"now the level 1 chain tries to add the atomic transaction to its next block proposal and sees that the leader chain has begun execution, so it can also begin execution.\nand then the internal cross-chain requests begin, where the two chains exchange requests and responses."}),"\n",(0,a.jsx)(t.p,{children:"next, we see a block finalization for the level 1 chain and another block finalization for the level 2 chain.\nso, the chains finalize their blocks together."}),"\n",(0,a.jsx)(t.p,{children:"Cross-chain transactions, atomic transactions on multiple chains, that are executed by the chains finalizing a block at the same time on multiple hierarchical chains."}),"\n",(0,a.jsx)(t.p,{children:"In future videos we will see cross-chain transactions on same level chains & much more."}),"\n",(0,a.jsx)(t.p,{children:"This tech is possible due to our continuous innovations on blockchain tech designs. I remind you all that this effort is made 100% as self-funded volunteer effort over a course of 8 years. And we will achieve tech that can revolutionize human & digital consensus, soon."}),"\n",(0,a.jsx)("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/6wcV7OeReeQ?si=Z8_KmI54gRde8TEz",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerpolicy:"strict-origin-when-cross-origin",allowfullscreen:!0})]})}function d(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},4997:e=>{e.exports=JSON.parse('{"permalink":"/blog/multichain-cross-chain-tx","editUrl":"https://github.com/loredanacirstea/wasmx-docs/tree/main/blog/2024-10-24-multichain-cross-chain-tx.md","source":"@site/blog/2024-10-24-multichain-cross-chain-tx.md","title":"MythosX - Trees of blockchains - a scaling solution [multichain elective state syncing]","description":"We are building a trust scalable system powered by a networked set of homogeneous blockchains based on our WasmX engine.","date":"2024-10-24T00:00:00.000Z","tags":[{"inline":false,"label":"wasmx","permalink":"/blog/tags/wasmx","description":"wasmx tag description"},{"inline":false,"label":"treechains","permalink":"/blog/tags/treechains","description":"treechains tag description"},{"inline":false,"label":"mythos","permalink":"/blog/tags/mythos","description":"mythos tag description"},{"inline":false,"label":"networkstate","permalink":"/blog/tags/networkstate","description":"networkstate tag description"}],"readingTime":6.065,"hasTruncateMarker":true,"authors":[{"name":"Loredana Cirstea","title":"Lead Engineer @ wasmX","url":"https://github.com/loredanacirstea","page":{"permalink":"/blog/authors/loredana"},"socials":{"x":"https://x.com/lorecirstea","github":"https://github.com/loredanacirstea"},"imageURL":"https://avatars.githubusercontent.com/u/4785356?v=4","key":"loredana"}],"frontMatter":{"slug":"multichain-cross-chain-tx","title":"MythosX - Trees of blockchains - a scaling solution [multichain elective state syncing]","authors":"loredana","tags":["wasmx","treechains","mythos","networkstate"]},"unlisted":false,"prevItem":{"title":"MythosX - Trees of blockchains - a scaling solution [multichain elective state syncing]","permalink":"/blog/treechains-multichain-elective-state-syncing"}}')},8453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>c});var s=n(6540);const a={},i=s.createContext(a);function o(e){const t=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),s.createElement(i.Provider,{value:t},e.children)}}}]);